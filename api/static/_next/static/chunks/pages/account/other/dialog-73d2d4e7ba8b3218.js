(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7051],{5097:function(e,t,a){"use strict";a.d(t,{V:function(){return l}});var n=a(1588),r=a(4867);function l(e){return(0,r.Z)("MuiDivider",e)}let i=(0,n.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=i},4592:function(e,t,a){"use strict";a.d(t,{f:function(){return l}});var n=a(1588),r=a(4867);function l(e){return(0,r.Z)("MuiListItemIcon",e)}let i=(0,n.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=i},6336:function(e,t,a){"use strict";a.d(t,{L:function(){return l}});var n=a(1588),r=a(4867);function l(e){return(0,r.Z)("MuiListItemText",e)}let i=(0,n.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);t.Z=i},8972:function(e,t,a){"use strict";a.d(t,{Z:function(){return P}});var n=a(3366),r=a(7462),l=a(7294),i=a(6010),o=a(4780),s=a(1796),c=a(948),u=a(1657),d=a(9773),p=a(4206),m=a(8974),v=a(1705),f=a(5097),h=a(4592),g=a(6336),b=a(1588),y=a(4867);function Z(e){return(0,y.Z)("MuiMenuItem",e)}let x=(0,b.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var C=a(5893);let k=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],w=e=>{let{disabled:t,dense:a,divider:n,disableGutters:l,selected:i,classes:s}=e,c=(0,o.Z)({root:["root",a&&"dense",t&&"disabled",!l&&"gutters",n&&"divider",i&&"selected"]},Z,s);return(0,r.Z)({},s,c)},j=(0,c.ZP)(p.Z,{shouldForwardProp:e=>(0,c.FO)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>(0,r.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${x.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${x.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${x.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${x.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${f.Z.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${f.Z.inset}`]:{marginLeft:52},[`& .${g.Z.root}`]:{marginTop:0,marginBottom:0},[`& .${g.Z.inset}`]:{paddingLeft:36},[`& .${h.Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&(0,r.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${h.Z.root} svg`]:{fontSize:"1.25rem"}}))),I=l.forwardRef(function(e,t){let a;let o=(0,u.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:c="li",dense:p=!1,divider:f=!1,disableGutters:h=!1,focusVisibleClassName:g,role:b="menuitem",tabIndex:y,className:Z}=o,x=(0,n.Z)(o,k),I=l.useContext(d.Z),P=l.useMemo(()=>({dense:p||I.dense||!1,disableGutters:h}),[I.dense,p,h]),$=l.useRef(null);(0,m.Z)(()=>{s&&$.current&&$.current.focus()},[s]);let V=(0,r.Z)({},o,{dense:P.dense,divider:f,disableGutters:h}),F=w(o),O=(0,v.Z)($,t);return o.disabled||(a=void 0!==y?y:-1),(0,C.jsx)(d.Z.Provider,{value:P,children:(0,C.jsx)(j,(0,r.Z)({ref:O,role:b,tabIndex:a,component:c,focusVisibleClassName:(0,i.Z)(F.focusVisible,g),className:(0,i.Z)(F.root,Z)},x,{ownerState:V,classes:F}))})});var P=I},1199:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/other/dialog",function(){return a(5515)}])},5731:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(5893);a(7294);var r=a(2492),l=a(5861),i=a(3870);function o(e){let{children:t,open:a,onClose:o,title:s,method:c,maxWidth:u=!1}=e;return(0,n.jsx)(n.Fragment,{children:a&&(0,n.jsxs)(r.Z,{open:a,onClose:o,fullWidth:!0,maxWidth:u,PaperProps:{sx:{p:{xs:2,lg:5}}},children:[(0,n.jsxs)(l.Z,{variant:"h4",mb:2,children:[(0,i.k)((0,i._)(s))," ","create"===c?"creation":"edition"]}),t]})})}},7874:function(e,t,a){"use strict";var n=a(5893),r=a(8868),l=a(9208),i=a.n(l);t.Z=e=>{let{formik:t,name:a,...l}=e,o=i()(t.touched,a),s=i()(t.errors,a),c=i()(t.values,a);return(0,n.jsx)(r.Z,{...l,fullWidth:!0,name:a,value:c,autoComplete:"off",error:!!(o&&s),helperText:o&&s,onBlur:t.handleBlur,onChange:t.handleChange})}},5515:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(5893),r=a(8482),l=a(6310),i=a(8216),o=a(6886),s=a(5861),c=a(6447),u=a(3321),d=a(8456),p=a(8972),m=a(8868),v=a(9208),f=a.n(v);function h(e){let{formik:t,name:a,options:r,...l}=e,i=f()(t.touched,a),o=f()(t.errors,a),s=f()(t.values,a);return(0,n.jsxs)(m.Z,{select:!0,fullWidth:!0,...l,name:a,autoComplete:"off",value:s,onBlur:t.handleBlur,onChange:t.handleChange,error:!!(i&&o),helperText:i&&o,children:[(0,n.jsx)(p.Z,{value:"",children:"None"}),r.map((e,t)=>(0,n.jsx)(p.Z,{value:e.value,children:e.label},t))]})}var g=a(7874),b=a(5121),y=a(7294),Z=a(5731),x=a(1840),C=a(6852),k=a(377);function w(e){let{title:t}=e,a=(0,x.TL)(),[p,m]=(0,y.useState)([]),[v,f]=(0,y.useState)([]),[w,j]=(0,y.useState)([]),[I,P]=(0,y.useState)(!1),$=(0,x.CG)(e=>e[t].dialog.open),V=(0,x.CG)(e=>e[t].dialog.item),F=(0,x.CG)(e=>e[t].dialog.method),O=(0,y.useCallback)(()=>{a((0,C.gk)())},[a]),S=(0,y.useCallback)(async(e,n)=>{try{P(!0);let{levelID:r,code:l,name:o}=e,s={levelID:r,code:l,name:o};switch(F){case"update":await a((0,C.VA)({id:V.id,...s})),(0,k.yv)("".concat((0,i.Z)(t)," updated!"),{variant:"success"});break;case"create":await a((0,C.nG)(s)),(0,k.yv)("New ".concat(t," saved!"),{variant:"success"}),n.resetForm()}}catch(e){(0,k.yv)(e.message,{variant:"error"}),n.setStatus({success:!1}),n.setErrors({submit:e.message}),n.setSubmitting(!1)}finally{P(!1)}},[a,null==V?void 0:V.id,F,t]),_=(0,r.TA)({initialValues:{level1:"",level2:"",level3:"",code:"",levelID:"",name:""},validationSchema:l.Ry({level1:l.Rx().test("glbal-ok","Level1 is required",e=>!!e&&0!==e),levelID:l.Z_().required("Name is required"),code:l.Z_().required("Chat of account is required").test("glbal-ok","Only numbers are allowed",e=>/^\d+$/g.test(e)).test("glbal-ok","Chat of account must be greater than 1",e=>Number(e)>0).test("glbal-ok","Chat of account must be less than 99",e=>100>Number(e)),name:l.Z_().required("Name is required").max(50)}),onSubmit:S});return(0,y.useEffect)(()=>{!async function(){try{let e=await b.Z.get("/account/level?parent=1");m(e.data.data.filter(e=>1!==e.value))}catch(e){console.log(e)}}()},[]),(0,y.useEffect)(()=>{!async function(){try{_.setFieldValue("level2","");let e=await b.Z.get("/account/level?parent=".concat(_.values.level1));f(e.data.data)}catch(e){f([])}}()},[_.values.level1]),(0,y.useEffect)(()=>{!async function(){try{_.setFieldValue("level3","");let e=await b.Z.get("/account/level?parent=".concat(_.values.level2));j(e.data.data)}catch(e){j([])}}()},[_.values.level2]),(0,y.useEffect)(()=>{_.setFieldValue("levelID",_.values.level3||_.values.level2||_.values.level1)},[_.values.level1,_.values.level2,_.values.level3]),(0,y.useEffect)(()=>{"update"===F&&$?(_.setFieldValue("code",V.code),_.setFieldValue("name",V.name),_.setFieldValue("level1",V.level1)):(f([]),j([]),_.resetForm())},[V]),(0,y.useEffect)(()=>{"update"===F&&$&&v.length>0&&_.setFieldValue("level2",V.level2)},[v]),(0,y.useEffect)(()=>{"update"===F&&$&&w.length>0&&_.setFieldValue("level3",V.level3)},[w]),(0,n.jsx)(Z.Z,{open:$,method:F,maxWidth:"lg",title:t,onClose:O,children:(0,n.jsxs)("form",{noValidate:!0,onSubmit:_.handleSubmit,children:[(0,n.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,n.jsx)(h,{formik:_,name:"level1",label:"Level1",options:p})}),(0,n.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,n.jsx)(h,{formik:_,name:"level2",label:"Level2",options:v})}),(0,n.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,n.jsx)(h,{formik:_,name:"level3",label:"Level3",options:w})}),(0,n.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(g.Z,{formik:_,name:"code",label:"Chat of account"})}),(0,n.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(g.Z,{formik:_,name:"name",label:"name"})}),(0,n.jsx)(o.ZP,{item:!0,xs:12,children:_.errors.submit&&(0,n.jsx)(s.Z,{color:"error",sx:{mt:2},variant:"body2",children:_.errors.submit})})]}),(0,n.jsx)(c.Z,{direction:"row",justifyContent:"flex-end",children:(0,n.jsx)(u.Z,{size:"large",sx:{ml:"auto"},type:"submit",variant:"contained",disabled:Object.keys(_.errors).length>0,children:I?(0,n.jsx)(d.Z,{}):"Save"})})]})})}},1840:function(e,t,a){"use strict";a.d(t,{CG:function(){return l},TL:function(){return r}});var n=a(5007);let r=n.I0,l=n.v9},6852:function(e,t,a){"use strict";a.d(t,{FB:function(){return Z},G3:function(){return b},SR:function(){return k},Tu:function(){return g},VA:function(){return C},YA:function(){return d},gk:function(){return y},kR:function(){return f},nG:function(){return x},qP:function(){return p},td:function(){return v},vB:function(){return m},zR:function(){return h}});var n=a(3784),r=a(377),l=a(5121);let i=(0,n.oM)({name:"other",initialState:{items:[],page:0,rowsPerPage:5,selected:[],search:"",dialog:{open:!1}},reducers:{init:(e,t)=>{e.items=t.payload},createItem:(e,t)=>{e.items.push(t.payload),e.dialog={open:!1}},updateItem:(e,t)=>{let a=t.payload.id,n=e.items.findIndex(e=>e.id===a);e.items[n]=t.payload,e.dialog={open:!1}},deleteItem:(e,t)=>{for(let a of t.payload){let t=e.items.findIndex(e=>e.id===a);e.items.splice(t,1)}e.selected=e.selected.filter(e=>!t.payload.includes(e)),e.dialog={open:!1}},setPage:(e,t)=>{e.page=t.payload},setSearch:(e,t)=>{e.page=0,e.selected=[],e.search=t.payload},setRowsPerPage:(e,t)=>{e.page=0,e.rowsPerPage=t.payload},deselectAll:(e,t)=>{e.selected=[]},selectAll:(e,t)=>{e.selected=t.payload},selectOne:(e,t)=>{e.selected.push(t.payload)},deselectOne:(e,t)=>{let a=e.selected.findIndex(e=>e.id===t.payload);e.selected.splice(a,1)},openDialog:(e,t)=>{e.dialog={open:!0,...t.payload}},closeDialog:(e,t)=>{e.dialog={open:!1}}}}),{init:o,createItem:s,updateItem:c,deleteItem:u,setPage:d,setSearch:p,setRowsPerPage:m,selectAll:v,deselectAll:f,selectOne:h,deselectOne:g,openDialog:b,closeDialog:y}=i.actions;function Z(){return async e=>{try{let t=await l.Z.post("/account/other",{method:"read"});e(o(t.data))}catch(e){(0,r.yv)(e.message,{variant:"error"})}}}function x(e){return async t=>{let{data:a}=await l.Z.post("/account/other",{method:"create",data:e});t(s(a))}}function C(e){return async t=>{let{data:a}=await l.Z.post("/account/other",{method:"update",data:e});t(c(a))}}function k(e){return async t=>{await l.Z.post("/account/other",{method:"delete",data:e}),t(u(e))}}t.ZP=i.reducer},3870:function(e,t,a){"use strict";a.d(t,{_:function(){return r},k:function(){return n}});let n=e=>e[0].toUpperCase()+e.slice(1),r=e=>"y"===e[-1]?"".concat(e.slice(0,-1),"ies"):"".concat(e,"s")}},function(e){e.O(0,[2226,7498,5984,7627,7327,8868,1783,9208,3757,9774,2888,179],function(){return e(e.s=1199)}),_N_E=e.O()}]);