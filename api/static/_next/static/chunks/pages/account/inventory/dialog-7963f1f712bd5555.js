(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6211],{3946:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var n=r(3366),o=r(7462),a=r(7294),i=r(6010),l=r(4780),s=r(1796),u=r(948),c=r(1657),d=r(4206),m=r(8216),p=r(1588),f=r(4867);function h(e){return(0,f.Z)("MuiIconButton",e)}let v=(0,p.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var g=r(5893);let x=["edge","children","className","color","disabled","disableFocusRipple","size"],Z=e=>{let{classes:t,disabled:r,color:n,edge:o,size:a}=e,i={root:["root",r&&"disabled","default"!==n&&`color${(0,m.Z)(n)}`,o&&`edge${(0,m.Z)(o)}`,`size${(0,m.Z)(a)}`]};return(0,l.Z)(i,h,t)},y=(0,u.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,m.Z)(r.color)}`],r.edge&&t[`edge${(0,m.Z)(r.edge)}`],t[`size${(0,m.Z)(r.size)}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12}),({theme:e,ownerState:t})=>{var r;let n=null==(r=(e.vars||e).palette)?void 0:r[t.color];return(0,o.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,o.Z)({color:null==n?void 0:n.main},!t.disableRipple&&{"&:hover":(0,o.Z)({},n&&{backgroundColor:e.vars?`rgba(${n.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(n.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${v.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),b=a.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiIconButton"}),{edge:a=!1,children:l,className:s,color:u="default",disabled:d=!1,disableFocusRipple:m=!1,size:p="medium"}=r,f=(0,n.Z)(r,x),h=(0,o.Z)({},r,{edge:a,color:u,disabled:d,disableFocusRipple:m,size:p}),v=Z(h);return(0,g.jsx)(y,(0,o.Z)({className:(0,i.Z)(v.root,s),centerRipple:!0,focusRipple:!m,disabled:d,ref:t,ownerState:h},f,{children:l}))});var j=b},8396:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n,o=r(7294),a=r(4168),i=r(539),l=r(8974);let s=(n||(n=r.t(o,2))).useSyncExternalStore;function u(e,t={}){let r=(0,a.Z)(),n="undefined"!=typeof window&&void 0!==window.matchMedia,{defaultMatches:u=!1,matchMedia:c=n?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:m=!1}=(0,i.Z)({name:"MuiUseMediaQuery",props:t,theme:r}),p="function"==typeof e?e(r):e;p=p.replace(/^@media( ?)/m,"");let f=(void 0!==s?function(e,t,r,n,a){let i=o.useCallback(()=>t,[t]),l=o.useMemo(()=>{if(a&&r)return()=>r(e).matches;if(null!==n){let{matches:t}=n(e);return()=>t}return i},[i,e,n,a,r]),[u,c]=o.useMemo(()=>{if(null===r)return[i,()=>()=>{}];let t=r(e);return[()=>t.matches,e=>(t.addListener(e),()=>{t.removeListener(e)})]},[i,r,e]),d=s(c,u,l);return d}:function(e,t,r,n,a){let[i,s]=o.useState(()=>a&&r?r(e).matches:n?n(e).matches:t);return(0,l.Z)(()=>{let t=!0;if(!r)return;let n=r(e),o=()=>{t&&s(n.matches)};return o(),n.addListener(o),()=>{t=!1,n.removeListener(o)}},[e,r]),i})(p,u,c,d,m);return f}},7069:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/inventory/dialog",function(){return r(3878)}])},5731:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(5893);r(7294);var o=r(2492),a=r(5861),i=r(3870);function l(e){let{children:t,open:r,onClose:l,title:s,method:u,maxWidth:c=!1}=e;return(0,n.jsx)(n.Fragment,{children:r&&(0,n.jsxs)(o.Z,{open:r,onClose:l,fullWidth:!0,maxWidth:c,PaperProps:{sx:{p:{xs:2,lg:5}}},children:[(0,n.jsxs)(a.Z,{variant:"h4",mb:2,children:[(0,i.k)((0,i._)(s))," ","create"===u?"creation":"edition"]}),t]})})}},1507:function(e,t,r){"use strict";r.d(t,{Z:function(){return C}});var n=r(5893),o=r(7294),a=r(8868),i=r(482),l=r(8400),s=r(8396),u=r(5438),c=r(7417),d=r(2734),m=r(948),p=r(1314),f=r(5861),h=r(5121),v=r(9208),g=r.n(v);function x(e){let{data:t,index:r,style:o}=e,a=t[r],i={...o,top:o.top+8};return a.hasOwnProperty("group")?(0,n.jsx)(u.Z,{component:"div",style:i,children:a.group},a.key):(0,n.jsx)(f.Z,{component:"li",...a[0],noWrap:!0,style:i,children:a[1].label})}let Z=o.createContext({}),y=o.forwardRef((e,t)=>{let r=o.useContext(Z);return(0,n.jsx)("div",{ref:t,...e,...r})}),b=o.forwardRef(function(e,t){let{children:r,...a}=e,i=[];r.forEach(e=>{i.push(e),i.push(...e.children||[])});let l=(0,d.Z)(),u=(0,s.Z)(l.breakpoints.up("sm"),{noSsr:!0}),c=i.length,m=u?36:48,f=e=>e.hasOwnProperty("group")?48:m,h=function(e){let t=o.useRef(null);return o.useEffect(()=>{null!=t.current&&t.current.resetAfterIndex(0,!0)},[e]),t}(c);return(0,n.jsx)("div",{ref:t,children:(0,n.jsx)(Z.Provider,{value:a,children:(0,n.jsx)(p.S_,{width:"100%",ref:h,overscanCount:5,itemData:i,innerElementType:"ul",itemCount:c,outerElementType:y,height:(c>8?8*m:i.map(f).reduce((e,t)=>e+t,0))+16,itemSize:e=>f(i[e]),children:x})})})}),j=(0,m.ZP)(c.Z)({["& .".concat(i.Z.listbox)]:{boxSizing:"border-box","& ul":{margin:0,padding:0}}});function C(e){let{formik:t,name:r,label:i,src:s,groupBy:u}=e,[c,d]=o.useState(!1),[m,p]=o.useState([]),f=g()(t.touched,r),v=g()(t.errors,r),x=g()(t.values,r),Z=m.find(e=>e.value===x);return o.useEffect(()=>{!async function(){try{d(!0);let e=await h.Z.get(s);p(e.data.data)}catch(e){console.log(e)}finally{d(!1)}}()},[s]),(0,n.jsx)(l.Z,{fullWidth:!0,disableListWrap:!0,loading:c,options:m,loadingText:"Loading...",PopperComponent:j,ListboxComponent:b,value:Z?Z.label:"",onChange:(e,n)=>t.setFieldValue(r,null==n?void 0:n.value),onBlur:()=>t.setFieldTouched(r),isOptionEqualToValue:(e,t)=>e.value===t,groupBy:u?e=>e.label[0].toUpperCase():void 0,renderInput:e=>(0,n.jsx)(a.Z,{...e,label:i,error:!!(f&&v),helperText:f&&v}),renderOption:(e,t,r)=>[e,t,r.index],renderGroup:e=>e})}},7250:function(e,t,r){"use strict";var n=r(5893),o=r(8868),a=r(9208),i=r.n(a);t.Z=e=>{let{formik:t,name:r,...a}=e,l=i()(t.touched,r),s=i()(t.errors,r);return(0,n.jsx)(o.Z,{...a,fullWidth:!0,name:r,autoComplete:"off",onBlur:t.handleBlur,onChange:t.handleChange,value:i()(t.values,r),error:!!(l&&s),helperText:l&&s})}},7874:function(e,t,r){"use strict";var n=r(5893),o=r(8868),a=r(9208),i=r.n(a);t.Z=e=>{let{formik:t,name:r,...a}=e,l=i()(t.touched,r),s=i()(t.errors,r),u=i()(t.values,r);return(0,n.jsx)(o.Z,{...a,fullWidth:!0,name:r,value:u,autoComplete:"off",error:!!(l&&s),helperText:l&&s,onBlur:t.handleBlur,onChange:t.handleChange})}},3878:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(5893),o=r(8482),a=r(6310),i=r(8216),l=r(6886),s=r(5861),u=r(6447),c=r(3321),d=r(8456),m=r(7874),p=r(1507),f=r(7250),h=r(7294),v=r(5731),g=r(1840),x=r(4804),Z=r(377);function y(e){let{title:t}=e,r=(0,g.TL)(),[y,b]=(0,h.useState)(!1),j=(0,g.CG)(e=>e[t].dialog.open),C=(0,g.CG)(e=>e[t].dialog.item),w=(0,g.CG)(e=>e[t].dialog.method),P=(0,h.useCallback)(()=>{r((0,x.gk)())},[r]),k=(0,h.useCallback)(async(e,n)=>{try{switch(b(!0),w){case"update":await r((0,x.VA)({id:C.id,...e})),(0,Z.yv)("".concat((0,i.Z)(t)," updated!"),{variant:"success"});break;case"create":await r((0,x.nG)(e)),(0,Z.yv)("New ".concat(t," saved!"),{variant:"success"}),n.resetForm()}}catch(e){(0,Z.yv)(e.message,{variant:"error"}),n.setStatus({success:!1}),n.setErrors({submit:e.message}),n.setSubmitting(!1)}finally{b(!1)}},[r,null==C?void 0:C.id,w,t]),S=(0,o.TA)({initialValues:{name:"",type:"",accountID:"",customerID:"",measureID:"",avg_price:"",notes:"",detail:""},validationSchema:a.Ry({name:a.Z_().required("Name is required").max(50),type:a.Z_().required("Company is required").max(50),accountID:a.Z_().required("Account is required"),customerID:a.Z_().required("Customer is required"),measureID:a.Z_().required("Measure is required"),avg_price:a.Z_().required("Average price is required").max(50),notes:a.Z_().required("Notes is required").max(50),detail:a.Z_().required("Detail is required").max(50)}),onSubmit:k});return(0,h.useEffect)(()=>{"update"===w&&j?S.setValues(C):S.resetForm()},[C]),(0,n.jsx)(v.Z,{open:j,method:w,title:t,maxWidth:"md",onClose:P,children:(0,n.jsxs)("form",{noValidate:!0,onSubmit:S.handleSubmit,children:[(0,n.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(m.Z,{formik:S,name:"name",label:"Name"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(m.Z,{formik:S,name:"type",label:"Type"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(p.Z,{formik:S,name:"accountID",label:"Account",src:"/account/accounts"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(p.Z,{formik:S,name:"customerID",label:"Customer",src:"/account/customers"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(p.Z,{formik:S,name:"measureID",label:"Measure",src:"/account/measures"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(f.Z,{formik:S,name:"avg_price",label:"Average Price"})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(m.Z,{formik:S,name:"notes",label:"Notes",multiline:!0,rows:3})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(m.Z,{formik:S,name:"detail",label:"Detail",multiline:!0,rows:3})}),(0,n.jsx)(l.ZP,{item:!0,xs:12,children:S.errors.submit&&(0,n.jsx)(s.Z,{color:"error",sx:{mt:2},variant:"body2",children:S.errors.submit})})]}),(0,n.jsx)(u.Z,{direction:"row",justifyContent:"flex-end",children:(0,n.jsx)(c.Z,{size:"large",sx:{ml:"auto"},type:"submit",variant:"contained",disabled:Object.keys(S.errors).length>0,children:y?(0,n.jsx)(d.Z,{}):"Save"})})]})})}},1840:function(e,t,r){"use strict";r.d(t,{CG:function(){return a},TL:function(){return o}});var n=r(5007);let o=n.I0,a=n.v9},4804:function(e,t,r){"use strict";r.d(t,{FB:function(){return y},G3:function(){return x},SR:function(){return C},Tu:function(){return g},VA:function(){return j},YA:function(){return d},gk:function(){return Z},kR:function(){return h},nG:function(){return b},qP:function(){return m},td:function(){return f},vB:function(){return p},zR:function(){return v}});var n=r(3784),o=r(377),a=r(5121);let i=(0,n.oM)({name:"inventory",initialState:{items:[],page:0,rowsPerPage:5,selected:[],search:"",dialog:{open:!1}},reducers:{init:(e,t)=>{e.items=t.payload},createItem:(e,t)=>{e.items.push(t.payload),e.dialog={open:!1}},updateItem:(e,t)=>{let r=t.payload.id,n=e.items.findIndex(e=>e.id===r);e.items[n]=t.payload,e.dialog={open:!1}},deleteItem:(e,t)=>{for(let r of t.payload){let t=e.items.findIndex(e=>e.id===r);e.items.splice(t,1)}e.selected=e.selected.filter(e=>!t.payload.includes(e)),e.dialog={open:!1}},setPage:(e,t)=>{e.page=t.payload},setSearch:(e,t)=>{e.page=0,e.selected=[],e.search=t.payload},setRowsPerPage:(e,t)=>{e.page=0,e.rowsPerPage=t.payload},deselectAll:(e,t)=>{e.selected=[]},selectAll:(e,t)=>{e.selected=t.payload},selectOne:(e,t)=>{e.selected.push(t.payload)},deselectOne:(e,t)=>{let r=e.selected.findIndex(e=>e.id===t.payload);e.selected.splice(r,1)},openDialog:(e,t)=>{e.dialog={open:!0,...t.payload}},closeDialog:(e,t)=>{e.dialog={open:!1}}}}),{init:l,createItem:s,updateItem:u,deleteItem:c,setPage:d,setSearch:m,setRowsPerPage:p,selectAll:f,deselectAll:h,selectOne:v,deselectOne:g,openDialog:x,closeDialog:Z}=i.actions;function y(){return async e=>{try{let t=await a.Z.post("/account/inventory",{method:"read"});e(l(t.data))}catch(e){(0,o.yv)(e.message,{variant:"error"})}}}function b(e){return async t=>{let{data:r}=await a.Z.post("/account/inventory",{method:"create",data:e});t(s(r))}}function j(e){return async t=>{let{data:r}=await a.Z.post("/account/inventory",{method:"update",data:e});t(u(r))}}function C(e){return async t=>{await a.Z.post("/account/inventory",{method:"delete",data:e}),t(c(e))}}t.ZP=i.reducer},3870:function(e,t,r){"use strict";r.d(t,{_:function(){return o},k:function(){return n}});let n=e=>e[0].toUpperCase()+e.slice(1),o=e=>"y"===e[-1]?"".concat(e.slice(0,-1),"ies"):"".concat(e,"s")}},function(e){e.O(0,[2226,7498,5984,7627,7327,8868,1783,9208,3757,6877,9774,2888,179],function(){return e(e.s=7069)}),_N_E=e.O()}]);