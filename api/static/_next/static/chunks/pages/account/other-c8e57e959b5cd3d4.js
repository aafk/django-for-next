(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{4678:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/other",function(){return l(6051)}])},5731:function(e,t,l){"use strict";l.d(t,{Z:function(){return c}});var a=l(5893);l(7294);var n=l(2492),s=l(5861),r=l(3870);function c(e){let{children:t,open:l,onClose:c,title:i,method:o,maxWidth:u=!1}=e;return(0,a.jsx)(a.Fragment,{children:l&&(0,a.jsxs)(n.Z,{open:l,onClose:c,fullWidth:!0,maxWidth:u,PaperProps:{sx:{p:{xs:2,lg:5}}},children:[(0,a.jsxs)(s.Z,{variant:"h4",mb:2,children:[(0,r.k)((0,r._)(i))," ","create"===o?"creation":"edition"]}),t]})})}},7874:function(e,t,l){"use strict";var a=l(5893),n=l(8868),s=l(9208),r=l.n(s);t.Z=e=>{let{formik:t,name:l,...s}=e,c=r()(t.touched,l),i=r()(t.errors,l),o=r()(t.values,l);return(0,a.jsx)(n.Z,{...s,fullWidth:!0,name:l,value:o,autoComplete:"off",error:!!(c&&i),helperText:c&&i,onBlur:t.handleBlur,onChange:t.handleChange})}},4578:function(e,t,l){"use strict";l.d(t,{Z:function(){return F}});var a=l(5893),n=l(6242),s=l(6447),r=l(7709),c=l(7109),i=l(3219),o=l(3321),u=l(7357),d=l(7906),h=l(3184),x=l(3816),v=l(8102),m=l(9368),f=l(3946),j=l(295),g=l(3911),Z=l(7294),p=l(580),C=l(5941),b=l(5349),k=l(2566),w=l(3557),y=l(670),P=l(9396),_=l(6737),E=l.n(_),S=l(1840),V=(e,t)=>{let{value:l,type:a}=t;return a===Boolean?e[l]?"Yes":"No":e[l]};function F(e){let{title:t="",headers:l=[],setPage:_,setSearch:F,setRowsPerPage:G,selectAll:L,deselectAll:N,selectOne:A,deselectOne:O,openDialog:R,deleteData:T}=e,q=(0,Z.useRef)(""),D=(0,S.TL)(),z=(0,S.CG)(e=>e[t].page),B=(0,S.CG)(e=>e[t].selected),I=(0,S.CG)(e=>e[t].search),W=(0,S.CG)(e=>e[t].rowsPerPage),M=(0,S.CG)(e=>e[t].items),U=(0,Z.useMemo)(()=>M.filter(e=>l.some(t=>e[t.value].toLowerCase().indexOf(I.toLowerCase())>-1)),[l,M,I]),X=(0,Z.useMemo)(()=>(0,C.i)(U,z,W),[U,z,W]),Y=(0,Z.useMemo)(()=>U.map(e=>e.id),[U]),H=U.length,$=B.length>0&&B.length<M.length,J=M.length>0&&B.length===M.length,K=(0,Z.useCallback)(e=>{D(G(e.target.value))},[D,G]),Q=(0,Z.useCallback)((e,t)=>{D(_(t))},[D,_]),ee=(0,Z.useCallback)(e=>{D(A(e))},[D,A]),et=(0,Z.useCallback)(e=>{D(O(e))},[D,O]),el=(0,Z.useCallback)(()=>{D(L(Y))},[D,L,Y]),ea=(0,Z.useCallback)(()=>{D(N())},[D,N]),en=(0,Z.useCallback)(e=>{D(F(e.target.value))},[D,F]),es=(0,Z.useCallback)(()=>{D(R({method:"create"}))},[D,R]),er=(0,Z.useCallback)(e=>()=>{D(R({method:"update",item:e}))},[D,R]),ec=(0,Z.useCallback)(e=>()=>{E()({title:"Are you sure?",text:"Are you sure that you want to delete this?",icon:"warning",dangerMode:!0}).then(t=>{if(t)return D(T(e));throw""}).catch(e=>{E()("Oops!",e.message,"error")})},[D,T]);return(0,Z.useEffect)(function(){let e="";for(let t of M)e+=l.map(e=>{let{value:l}=e;return t[l]}).join(",")+"\r\n";q.current.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e))},[l,M]),(0,a.jsxs)(n.Z,{children:[(0,a.jsx)(n.Z,{sx:{p:2},children:(0,a.jsxs)(s.Z,{direction:"row",justifyContent:"space-between",spacing:2,sx:{px:1},children:[(0,a.jsx)(r.Z,{defaultValue:"",fullWidth:!0,value:I,onChange:en,placeholder:"Search ".concat(t,"s"),startAdornment:(0,a.jsx)(c.Z,{position:"start",children:(0,a.jsx)(i.Z,{color:"primary",fontSize:"small",children:(0,a.jsx)(P.Z,{})})})}),(0,a.jsxs)(s.Z,{direction:"row",spacing:1,children:[(0,a.jsx)(o.Z,{size:"small",component:"a",ref:q,href:"javascript:void(0)",download:"".concat(t,".csv"),startIcon:(0,a.jsx)(i.Z,{fontSize:"small",children:(0,a.jsx)(w.Z,{})}),variant:"contained",children:"Export"}),(0,a.jsx)(o.Z,{size:"small",onClick:es,startIcon:(0,a.jsx)(i.Z,{fontSize:"small",children:(0,a.jsx)(y.Z,{})}),variant:"contained",children:"Create"})]})]})}),(0,a.jsx)(p.L,{children:(0,a.jsx)(u.Z,{sx:{minWidth:800},children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(h.Z,{children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(v.Z,{padding:"checkbox",children:(0,a.jsx)(m.Z,{checked:J,indeterminate:$,onChange:e=>{e.target.checked?el():ea()}})}),l.map((e,t)=>{let{label:l}=e;return(0,a.jsx)(v.Z,{children:l},t)}),(0,a.jsx)(v.Z,{align:"right",children:B.length>0?(0,a.jsx)(f.Z,{onClick:ec(B),sx:{py:0},children:(0,a.jsx)(i.Z,{color:"error",children:(0,a.jsx)(b.Z,{})})}):"Edit"})]})}),(0,a.jsx)(j.Z,{children:X.map((e,t)=>{let n=B.includes(e.id);return(0,a.jsxs)(x.Z,{hover:!0,selected:n,children:[(0,a.jsx)(v.Z,{padding:"checkbox",children:(0,a.jsx)(m.Z,{checked:n,onChange:t=>{t.target.checked?ee(e.id):null==et||et(e.id)}})}),l.map((t,l)=>(0,a.jsx)(v.Z,{children:V(e,t)},l)),(0,a.jsx)(v.Z,{align:"right",children:(0,a.jsx)(f.Z,{onClick:er(e),sx:{py:0},children:(0,a.jsx)(i.Z,{color:"success",children:(0,a.jsx)(k.Z,{})})})})]},t)})})]})})}),(0,a.jsx)(g.Z,{component:"div",page:z,count:H,rowsPerPage:W,onPageChange:Q,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:K})]})}},5515:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return w}});var a=l(5893),n=l(8482),s=l(6310),r=l(8216),c=l(6886),i=l(5861),o=l(6447),u=l(3321),d=l(8456),h=l(8972),x=l(8868),v=l(9208),m=l.n(v);function f(e){let{formik:t,name:l,options:n,...s}=e,r=m()(t.touched,l),c=m()(t.errors,l),i=m()(t.values,l);return(0,a.jsxs)(x.Z,{select:!0,fullWidth:!0,...s,name:l,autoComplete:"off",value:i,onBlur:t.handleBlur,onChange:t.handleChange,error:!!(r&&c),helperText:r&&c,children:[(0,a.jsx)(h.Z,{value:"",children:"None"}),n.map((e,t)=>(0,a.jsx)(h.Z,{value:e.value,children:e.label},t))]})}var j=l(7874),g=l(5121),Z=l(7294),p=l(5731),C=l(1840),b=l(6852),k=l(377);function w(e){let{title:t}=e,l=(0,C.TL)(),[h,x]=(0,Z.useState)([]),[v,m]=(0,Z.useState)([]),[w,y]=(0,Z.useState)([]),[P,_]=(0,Z.useState)(!1),E=(0,C.CG)(e=>e[t].dialog.open),S=(0,C.CG)(e=>e[t].dialog.item),V=(0,C.CG)(e=>e[t].dialog.method),F=(0,Z.useCallback)(()=>{l((0,b.gk)())},[l]),G=(0,Z.useCallback)(async(e,a)=>{try{_(!0);let{levelID:n,code:s,name:c}=e,i={levelID:n,code:s,name:c};switch(V){case"update":await l((0,b.VA)({id:S.id,...i})),(0,k.yv)("".concat((0,r.Z)(t)," updated!"),{variant:"success"});break;case"create":await l((0,b.nG)(i)),(0,k.yv)("New ".concat(t," saved!"),{variant:"success"}),a.resetForm()}}catch(e){(0,k.yv)(e.message,{variant:"error"}),a.setStatus({success:!1}),a.setErrors({submit:e.message}),a.setSubmitting(!1)}finally{_(!1)}},[l,null==S?void 0:S.id,V,t]),L=(0,n.TA)({initialValues:{level1:"",level2:"",level3:"",code:"",levelID:"",name:""},validationSchema:s.Ry({level1:s.Rx().test("glbal-ok","Level1 is required",e=>!!e&&0!==e),levelID:s.Z_().required("Name is required"),code:s.Z_().required("Chat of account is required").test("glbal-ok","Only numbers are allowed",e=>/^\d+$/g.test(e)).test("glbal-ok","Chat of account must be greater than 1",e=>Number(e)>0).test("glbal-ok","Chat of account must be less than 99",e=>100>Number(e)),name:s.Z_().required("Name is required").max(50)}),onSubmit:G});return(0,Z.useEffect)(()=>{!async function(){try{let e=await g.Z.get("/account/level?parent=1");x(e.data.data.filter(e=>1!==e.value))}catch(e){console.log(e)}}()},[]),(0,Z.useEffect)(()=>{!async function(){try{L.setFieldValue("level2","");let e=await g.Z.get("/account/level?parent=".concat(L.values.level1));m(e.data.data)}catch(e){m([])}}()},[L.values.level1]),(0,Z.useEffect)(()=>{!async function(){try{L.setFieldValue("level3","");let e=await g.Z.get("/account/level?parent=".concat(L.values.level2));y(e.data.data)}catch(e){y([])}}()},[L.values.level2]),(0,Z.useEffect)(()=>{L.setFieldValue("levelID",L.values.level3||L.values.level2||L.values.level1)},[L.values.level1,L.values.level2,L.values.level3]),(0,Z.useEffect)(()=>{"update"===V&&E?(L.setFieldValue("code",S.code),L.setFieldValue("name",S.name),L.setFieldValue("level1",S.level1)):(m([]),y([]),L.resetForm())},[S]),(0,Z.useEffect)(()=>{"update"===V&&E&&v.length>0&&L.setFieldValue("level2",S.level2)},[v]),(0,Z.useEffect)(()=>{"update"===V&&E&&w.length>0&&L.setFieldValue("level3",S.level3)},[w]),(0,a.jsx)(p.Z,{open:E,method:V,maxWidth:"lg",title:t,onClose:F,children:(0,a.jsxs)("form",{noValidate:!0,onSubmit:L.handleSubmit,children:[(0,a.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(f,{formik:L,name:"level1",label:"Level1",options:h})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(f,{formik:L,name:"level2",label:"Level2",options:v})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(f,{formik:L,name:"level3",label:"Level3",options:w})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(j.Z,{formik:L,name:"code",label:"Chat of account"})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(j.Z,{formik:L,name:"name",label:"name"})}),(0,a.jsx)(c.ZP,{item:!0,xs:12,children:L.errors.submit&&(0,a.jsx)(i.Z,{color:"error",sx:{mt:2},variant:"body2",children:L.errors.submit})})]}),(0,a.jsx)(o.Z,{direction:"row",justifyContent:"flex-end",children:(0,a.jsx)(u.Z,{size:"large",sx:{ml:"auto"},type:"submit",variant:"contained",disabled:Object.keys(L.errors).length>0,children:P?(0,a.jsx)(d.Z,{}):"Save"})})]})})}},6051:function(e,t,l){"use strict";l.r(t);var a=l(5893),n=l(9008),s=l.n(n),r=l(8216),c=l(5861),i=l(7066),o=l(4578),u=l(6852),d=l(5515),h=l(1840),x=l(7294),v=l(3870);let m="account",f=[{label:"Name",value:"name"},{label:"Chat of account",value:"code"},{label:"Level",value:"level"}],j=()=>{let e=(0,h.TL)(),t=(0,r.Z)((0,v._)(m));return(0,x.useEffect)(()=>{e((0,u.FB)())},[e]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s(),{children:(0,a.jsxs)("title",{children:[t," | AVCDH GROUP"]})}),(0,a.jsx)(c.Z,{variant:"h4",mb:3,children:t}),(0,a.jsx)(o.Z,{title:m,headers:f,setPage:u.YA,setSearch:u.qP,setRowsPerPage:u.vB,selectAll:u.td,deselectAll:u.kR,selectOne:u.zR,deselectOne:u.Tu,openDialog:u.G3,createData:u.nG,updateData:u.VA,deleteData:u.SR}),(0,a.jsx)(d.default,{title:m})]})};j.getLayout=e=>(0,a.jsx)(i.A,{children:e}),t.default=j},1840:function(e,t,l){"use strict";l.d(t,{CG:function(){return s},TL:function(){return n}});var a=l(5007);let n=a.I0,s=a.v9},5941:function(e,t,l){"use strict";function a(e,t,l){return e.slice(t*l,t*l+l)}l.d(t,{i:function(){return a}})},3870:function(e,t,l){"use strict";l.d(t,{_:function(){return n},k:function(){return a}});let a=e=>e[0].toUpperCase()+e.slice(1),n=e=>"y"===e[-1]?"".concat(e.slice(0,-1),"ies"):"".concat(e,"s")}},function(e){e.O(0,[2226,7498,5984,7627,7327,8868,1783,742,9208,3757,6219,7771,6491,9087,8999,7066,9774,2888,179],function(){return e(e.s=4678)}),_N_E=e.O()}]);