(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{8927:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/entry/journal",function(){return n(7220)}])},1507:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(5893),s=n(7294),i=n(8868),a=n(482),o=n(8400),l=n(8396),u=n(5438),c=n(7417),d=n(2734),h=n(948),m=n(1314),x=n(5861),f=n(5121),p=n(9208),j=n.n(p);function Z(e){let{data:t,index:n,style:s}=e,i=t[n],a={...s,top:s.top+8};return i.hasOwnProperty("group")?(0,r.jsx)(u.Z,{component:"div",style:a,children:i.group},i.key):(0,r.jsx)(x.Z,{component:"li",...i[0],noWrap:!0,style:a,children:i[1].label})}let b=s.createContext({}),v=s.forwardRef((e,t)=>{let n=s.useContext(b);return(0,r.jsx)("div",{ref:t,...e,...n})}),g=s.forwardRef(function(e,t){let{children:n,...i}=e,a=[];n.forEach(e=>{a.push(e),a.push(...e.children||[])});let o=(0,d.Z)(),u=(0,l.Z)(o.breakpoints.up("sm"),{noSsr:!0}),c=a.length,h=u?36:48,x=e=>e.hasOwnProperty("group")?48:h,f=function(e){let t=s.useRef(null);return s.useEffect(()=>{null!=t.current&&t.current.resetAfterIndex(0,!0)},[e]),t}(c);return(0,r.jsx)("div",{ref:t,children:(0,r.jsx)(b.Provider,{value:i,children:(0,r.jsx)(m.S_,{width:"100%",ref:f,overscanCount:5,itemData:a,innerElementType:"ul",itemCount:c,outerElementType:v,height:(c>8?8*h:a.map(x).reduce((e,t)=>e+t,0))+16,itemSize:e=>x(a[e]),children:Z})})})}),y=(0,h.ZP)(c.Z)({["& .".concat(a.Z.listbox)]:{boxSizing:"border-box","& ul":{margin:0,padding:0}}});function C(e){let{formik:t,name:n,label:a,src:l,groupBy:u}=e,[c,d]=s.useState(!1),[h,m]=s.useState([]),x=j()(t.touched,n),p=j()(t.errors,n),Z=j()(t.values,n),b=h.find(e=>e.value===Z);return s.useEffect(()=>{!async function(){try{d(!0);let e=await f.Z.get(l);m(e.data.data)}catch(e){console.log(e)}finally{d(!1)}}()},[l]),(0,r.jsx)(o.Z,{fullWidth:!0,disableListWrap:!0,loading:c,options:h,loadingText:"Loading...",PopperComponent:y,ListboxComponent:g,value:b?b.label:"",onChange:(e,r)=>t.setFieldValue(n,null==r?void 0:r.value),onBlur:()=>t.setFieldTouched(n),isOptionEqualToValue:(e,t)=>e.value===t,groupBy:u?e=>e.label[0].toUpperCase():void 0,renderInput:e=>(0,r.jsx)(i.Z,{...e,label:a,error:!!(x&&p),helperText:x&&p}),renderOption:(e,t,n)=>[e,t,n.index],renderGroup:e=>e})}},8121:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5893),s=n(7484),i=n.n(s),a=n(3229),o=n(7294),l=n(9208),u=n.n(l);function c(e){let{formik:t,name:n,...s}=e,l=u()(t.touched,n),c=u()(t.errors,n),d=u()(t.values,n),h=(0,o.useCallback)(e=>{t.setFieldValue(n,e.format("YYYY-MM-DD"))},[t.setFieldValue,n]);return(0,r.jsx)(a.M,{...s,name:n,onChange:h,value:i()(d),slotProps:{textField:{fullWidth:!0,error:!!(l&&c),helperText:l&&c,onBlur:()=>{t.setFieldTouched(n)}}}})}},7250:function(e,t,n){"use strict";var r=n(5893),s=n(8868),i=n(9208),a=n.n(i);t.Z=e=>{let{formik:t,name:n,...i}=e,o=a()(t.touched,n),l=a()(t.errors,n);return(0,r.jsx)(s.Z,{...i,fullWidth:!0,name:n,autoComplete:"off",onBlur:t.handleBlur,onChange:t.handleChange,value:a()(t.values,n),error:!!(o&&l),helperText:o&&l})}},7874:function(e,t,n){"use strict";var r=n(5893),s=n(8868),i=n(9208),a=n.n(i);t.Z=e=>{let{formik:t,name:n,...i}=e,o=a()(t.touched,n),l=a()(t.errors,n),u=a()(t.values,n);return(0,r.jsx)(s.Z,{...i,fullWidth:!0,name:n,value:u,autoComplete:"off",error:!!(o&&l),helperText:o&&l,onBlur:t.handleBlur,onChange:t.handleChange})}},7220:function(e,t,n){"use strict";n.r(t);var r=n(5893),s=n(9008),i=n.n(s),a=n(8482),o=n(6310),l=n(6886),u=n(6242),c=n(8445),d=n(4267),h=n(6447),m=n(5861),x=n(3321),f=n(2023),p=n(8456),j=n(7066),Z=n(5121),b=n(377),v=n(7294);n(7250);var g=n(7874),y=n(8121),C=n(1507);function k(e){let{formik:t,index:n}=e;return(0,r.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(C.Z,{formik:t,name:"transactions[".concat(n,"].accountID"),label:"Account",src:"/account/accounts"})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(C.Z,{formik:t,name:"transactions[".concat(n,"].customerID"),label:"Customer",src:"/account/customers"})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(g.Z,{formik:t,name:"transactions[".concat(n,"].credit"),type:"number",label:"Credit"})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(g.Z,{formik:t,name:"transactions[".concat(n,"].debit"),type:"number",label:"Debit"})})]})}function P(){let[e,t]=(0,v.useState)(!1),n=(0,a.TA)({initialValues:{date:"",notes:"",transactions:[{accountID:"",customerID:"",credit:"",debit:""}]},validationSchema:o.Ry().shape({date:o.hT().required("Date is required"),notes:o.Z_().required("Notes is required"),transactions:o.IX(o.Ry({accountID:o.Z_().required("Account is required"),customerID:o.Z_().required("Customer is required"),credit:o.Rx().required("Credit is required"),debit:o.Rx().required("Debit is required")})).required("Transactions is required")}),onSubmit:async(e,n)=>{try{t(!0),await Z.Z.post("/account/customer",e),n.resetForm(),(0,b.yv)("successfully saved!",{variant:"success"})}catch(e){n.setStatus({success:!1}),n.setErrors({submit:e.message}),n.setSubmitting(!1)}finally{t(!1)}}}),s=(0,v.useCallback)(e=>{n.setFieldValue("transactions",n.values.transactions.filter((t,n)=>n!==e))},[n.values.transactions]),j=(0,v.useCallback)(()=>n.setFieldValue("transactions",[...n.values.transactions,{customerID:"",accountID:"",credit:"",debit:""}]),[n.values]);return console.log({formik:n.values}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"Journal Management | AVCDH GROUP"})}),(0,r.jsx)(u.Z,{xs:5,children:(0,r.jsxs)("form",{noValidate:!0,onSubmit:n.handleSubmit,children:[(0,r.jsx)(c.Z,{title:"Journal Management",titleTypographyProps:{variant:"h4"}}),(0,r.jsx)(d.Z,{children:(0,r.jsxs)(l.ZP,{container:!0,spacing:2,children:[(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(y.Z,{formik:n,name:"date",label:"Date"})}),(0,r.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,r.jsx)(g.Z,{formik:n,name:"notes",label:"Notes"})}),n.values.transactions.map((e,t)=>(0,r.jsxs)(l.ZP,{item:!0,xs:12,children:[(0,r.jsxs)(h.Z,{direction:"row",alignItems:"flex-end",justifyContent:"space-between",spacing:1,sx:{pb:1},children:[(0,r.jsxs)(m.Z,{component:"span",variant:"h6",children:["#",t+1]}),(0,r.jsx)(x.Z,{size:"small",color:"error",variant:"contained",sx:{py:.5},onClick:()=>s(t),children:"Remove"})]}),(0,r.jsx)(k,{index:t,formik:n})]},t)),(0,r.jsx)(l.ZP,{item:!0,xs:12,children:n.errors.submit&&(0,r.jsx)(m.Z,{color:"error",sx:{mt:2},variant:"body2",children:n.errors.submit})})]})}),(0,r.jsx)(f.Z,{children:(0,r.jsxs)(h.Z,{direction:"row",justifyContent:"flex-end",sx:{width:1},spacing:2,children:[(0,r.jsx)(x.Z,{color:"success",variant:"contained",onClick:j,children:"Add"}),(0,r.jsx)(x.Z,{type:"submit",variant:"contained",disabled:Object.keys(n.errors).length>0,children:e?(0,r.jsx)(p.Z,{}):"Save"})]})})]})})]})}P.getLayout=e=>(0,r.jsx)(j.A,{children:e}),t.default=P}},function(e){e.O(0,[2226,7498,5984,7627,7327,8868,1783,742,9208,3757,6219,7771,6877,3229,9859,7066,9774,2888,179],function(){return e(e.s=8927)}),_N_E=e.O()}]);