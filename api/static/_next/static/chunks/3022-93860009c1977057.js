"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3022],{5731:function(e,r,n){n.d(r,{Z:function(){return s}});var t=n(5893);n(7294);var i=n(2492),a=n(5861),l=n(3870);function s(e){let{children:r,open:n,onClose:s,title:o,method:u,maxWidth:c=!1}=e;return(0,t.jsx)(t.Fragment,{children:n&&(0,t.jsxs)(i.Z,{open:n,onClose:s,fullWidth:!0,maxWidth:c,PaperProps:{sx:{p:{xs:2,lg:5}}},children:[(0,t.jsxs)(a.Z,{variant:"h4",mb:2,children:[(0,l.k)((0,l._)(o))," ","create"===u?"creation":"edition"]}),r]})})}},1507:function(e,r,n){n.d(r,{Z:function(){return y}});var t=n(5893),i=n(7294),a=n(8868),l=n(482),s=n(8400),o=n(8396),u=n(5438),c=n(7417),d=n(2734),m=n(948),h=n(1314),x=n(5861),f=n(5121),p=n(9208),Z=n.n(p);function v(e){let{data:r,index:n,style:i}=e,a=r[n],l={...i,top:i.top+8};return a.hasOwnProperty("group")?(0,t.jsx)(u.Z,{component:"div",style:l,children:a.group},a.key):(0,t.jsx)(x.Z,{component:"li",...a[0],noWrap:!0,style:l,children:a[1].label})}let j=i.createContext({}),b=i.forwardRef((e,r)=>{let n=i.useContext(j);return(0,t.jsx)("div",{ref:r,...e,...n})}),g=i.forwardRef(function(e,r){let{children:n,...a}=e,l=[];n.forEach(e=>{l.push(e),l.push(...e.children||[])});let s=(0,d.Z)(),u=(0,o.Z)(s.breakpoints.up("sm"),{noSsr:!0}),c=l.length,m=u?36:48,x=e=>e.hasOwnProperty("group")?48:m,f=function(e){let r=i.useRef(null);return i.useEffect(()=>{null!=r.current&&r.current.resetAfterIndex(0,!0)},[e]),r}(c);return(0,t.jsx)("div",{ref:r,children:(0,t.jsx)(j.Provider,{value:a,children:(0,t.jsx)(h.S_,{width:"100%",ref:f,overscanCount:5,itemData:l,innerElementType:"ul",itemCount:c,outerElementType:b,height:(c>8?8*m:l.map(x).reduce((e,r)=>e+r,0))+16,itemSize:e=>x(l[e]),children:v})})})}),C=(0,m.ZP)(c.Z)({["& .".concat(l.Z.listbox)]:{boxSizing:"border-box","& ul":{margin:0,padding:0}}});function y(e){let{formik:r,name:n,label:l,src:o,groupBy:u}=e,[c,d]=i.useState(!1),[m,h]=i.useState([]),x=Z()(r.touched,n),p=Z()(r.errors,n),v=Z()(r.values,n),j=m.find(e=>e.value===v);return i.useEffect(()=>{!async function(){try{d(!0);let e=await f.Z.get(o);h(e.data.data)}catch(e){console.log(e)}finally{d(!1)}}()},[o]),(0,t.jsx)(s.Z,{fullWidth:!0,disableListWrap:!0,loading:c,options:m,loadingText:"Loading...",PopperComponent:C,ListboxComponent:g,value:j?j.label:"",onChange:(e,t)=>r.setFieldValue(n,null==t?void 0:t.value),onBlur:()=>r.setFieldTouched(n),isOptionEqualToValue:(e,r)=>e.value===r,groupBy:u?e=>e.label[0].toUpperCase():void 0,renderInput:e=>(0,t.jsx)(a.Z,{...e,label:l,error:!!(x&&p),helperText:x&&p}),renderOption:(e,r,n)=>[e,r,n.index],renderGroup:e=>e})}},8121:function(e,r,n){n.d(r,{Z:function(){return c}});var t=n(5893),i=n(7484),a=n.n(i),l=n(3229),s=n(7294),o=n(9208),u=n.n(o);function c(e){let{formik:r,name:n,...i}=e,o=u()(r.touched,n),c=u()(r.errors,n),d=u()(r.values,n),m=(0,s.useCallback)(e=>{r.setFieldValue(n,e.format("YYYY-MM-DD"))},[r.setFieldValue,n]);return(0,t.jsx)(l.M,{...i,name:n,onChange:m,value:a()(d),slotProps:{textField:{fullWidth:!0,error:!!(o&&c),helperText:o&&c,onBlur:()=>{r.setFieldTouched(n)}}}})}},7250:function(e,r,n){var t=n(5893),i=n(8868),a=n(9208),l=n.n(a);r.Z=e=>{let{formik:r,name:n,...a}=e,s=l()(r.touched,n),o=l()(r.errors,n);return(0,t.jsx)(i.Z,{...a,fullWidth:!0,name:n,autoComplete:"off",onBlur:r.handleBlur,onChange:r.handleChange,value:l()(r.values,n),error:!!(s&&o),helperText:s&&o})}},8344:function(e,r,n){n.d(r,{Z:function(){return d}});var t=n(5893),i=n(7294),a=n(5843),l=n(480),s=n(4054),o=n(6815),u=n(9208),c=n.n(u);function d(e){let{formik:r,name:n,label:u}=e,d=c()(r.touched,n),m=c()(r.errors,n),h=c()(r.values,n),x=(0,i.useCallback)(e=>{r.setFieldValue(n,e.target.checked)},[r,n]);return(0,t.jsxs)(s.Z,{component:"fieldset",variant:"standard",children:[(0,t.jsx)(l.Z,{label:u,control:(0,t.jsx)(a.Z,{checked:h,onBlur:r.handleBlur,onChange:x})}),(0,t.jsx)(o.Z,{children:d&&m})]})}},7874:function(e,r,n){var t=n(5893),i=n(8868),a=n(9208),l=n.n(a);r.Z=e=>{let{formik:r,name:n,...a}=e,s=l()(r.touched,n),o=l()(r.errors,n),u=l()(r.values,n);return(0,t.jsx)(i.Z,{...a,fullWidth:!0,name:n,value:u,autoComplete:"off",error:!!(s&&o),helperText:s&&o,onBlur:r.handleBlur,onChange:r.handleChange})}},3022:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var t=n(5893),i=n(8482),a=n(6310),l=n(8216),s=n(6886),o=n(5861),u=n(6447),c=n(3321),d=n(8456),m=n(7874),h=n(1507),x=n(7250),f=n(8121),p=n(8344),Z=n(7294),v=n(5731),j=n(1840),b=n(265),g=n(377);function C(e){let{title:r}=e,n=(0,j.TL)(),[C,y]=(0,Z.useState)(!1),k=(0,j.CG)(e=>e[r].dialog.open),P=(0,j.CG)(e=>e[r].dialog.item),q=(0,j.CG)(e=>e[r].dialog.method),_=(0,Z.useCallback)(()=>{n((0,b.gk)())},[n]),w=(0,Z.useCallback)(async(e,t)=>{try{switch(y(!0),q){case"update":await n((0,b.VA)({id:P.id,...e})),(0,g.yv)("".concat((0,l.Z)(r)," updated!"),{variant:"success"});break;case"create":await n((0,b.nG)(e)),(0,g.yv)("New ".concat(r," saved!"),{variant:"success"}),t.resetForm()}}catch(e){(0,g.yv)(e.message,{variant:"error"}),t.setStatus({success:!1}),t.setErrors({submit:e.message}),t.setSubmitting(!1)}finally{y(!1)}},[n,null==P?void 0:P.id,q,r]),D=(0,i.TA)({initialValues:{accountID:"",levelID:"",name:"",type:"",price:"",brand:"",purchase_month:"",notes:"",detail:"",depreciation:!1},validationSchema:a.Ry({name:a.Z_().required("Name is required").max(50),accountID:a.Z_().required("Account is required").max(50),levelID:a.Z_().required("Level is required").max(50),brand:a.Z_().required("Brand is required").max(50),type:a.Z_().required("Type is required").max(50),price:a.Rx().required("Price is required"),purchase_month:a.Z_().required("Purchase month is required").test("glbal-ok","Invalid Date",e=>"Invalid Date"!==e),notes:a.Z_().required("Notes is required").max(50),detail:a.Z_().required("Detail is required").max(50),depreciation:a.O7()}),onSubmit:w});return(0,Z.useEffect)(()=>{"update"===q&&k?D.setValues(P):D.resetForm()},[P]),(0,t.jsx)(v.Z,{open:k,method:q,title:r,maxWidth:"md",onClose:_,children:(0,t.jsxs)("form",{noValidate:!0,onSubmit:D.handleSubmit,children:[(0,t.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(h.Z,{formik:D,name:"accountID",label:"Account",src:"/account/accounts"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(h.Z,{formik:D,name:"levelID",label:"Deperciation Level",src:"/account/depreciations"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(m.Z,{formik:D,name:"name",label:"Name"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(m.Z,{formik:D,name:"type",label:"Type"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(f.Z,{formik:D,name:"purchase_month",views:["month","year"],label:"Purchase Month"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(m.Z,{formik:D,name:"brand",label:"Brand"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(x.Z,{formik:D,name:"price",label:"Price"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(m.Z,{formik:D,name:"notes",label:"Notes",multiline:!0,rows:3})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(m.Z,{formik:D,name:"detail",label:"Detail",multiline:!0,rows:3})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(p.Z,{formik:D,name:"depreciation",label:"Depreciation"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,children:D.errors.submit&&(0,t.jsx)(o.Z,{color:"error",sx:{mt:2},variant:"body2",children:D.errors.submit})})]}),(0,t.jsx)(u.Z,{direction:"row",justifyContent:"flex-end",children:(0,t.jsx)(c.Z,{size:"large",sx:{ml:"auto"},type:"submit",variant:"contained",disabled:Object.keys(D.errors).length>0,children:C?(0,t.jsx)(d.Z,{}):"Save"})})]})})}},1840:function(e,r,n){n.d(r,{CG:function(){return a},TL:function(){return i}});var t=n(5007);let i=t.I0,a=t.v9},3870:function(e,r,n){n.d(r,{_:function(){return i},k:function(){return t}});let t=e=>e[0].toUpperCase()+e.slice(1),i=e=>"y"===e[-1]?"".concat(e.slice(0,-1),"ies"):"".concat(e,"s")}}]);